<%= turbo_frame_tag "my_bookings" do %>

  <div class="p-4 shadow-sm border-0 rounded-4 bg-white mb-4">

    <h4 class="fw-bold text-primary mb-3">
      <i class="fa-solid fa-calendar-check me-2"></i>
      Mis reservas
    </h4>

    <% if @bookings.any? %>
      <ul class="list-group list-group-flush mb-4">
        <% @bookings.each do |booking| %>
          <li class="list-group-item d-flex justify-content-between align-items-center p-3">
            <div>
              <strong class="text-primary"><%= booking.resident.user.name %></strong><br>
              <small class="text-muted">
                <%= l booking.start, format: :long %> → <%= l booking.end, format: :long %>
              </small>
            </div>

            <div class="d-flex gap-2">
              <% if policy(booking).edit? %>
                <%= link_to "Editar", edit_booking_path(booking),
                    class: "btn btn-warning btn-sm rounded-pill shadow-sm" %>
              <% end %>
              <%= link_to "Eliminar",
                  booking_path(booking),
                  data: { turbo_method: :delete, turbo_confirm: "¿Seguro?" },
                  class: "btn btn-danger btn-sm rounded-pill shadow-sm" %>
            </div>
          </li>
        <% end %>
      </ul>
    <% else %>
      <p class="text-muted fst-italic text-center mb-4">
        Aún no tienes reservas para este espacio.
      </p>
    <% end %>

    <div class="text-center">
      <%= link_to "Cerrar",
          common_space_path(@common_space),
          class: "btn btn-outline-primary btn-lg px-4 rounded-pill shadow-sm" %>
    </div>

  </div>

<% end %>
