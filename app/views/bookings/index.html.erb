<%= turbo_frame_tag "my_bookings" do %>
  <div class="container py-5">

    <!-- Título -->
    <h2 class="fw-bold text-primary mb-4 text-center">
      Reservas de <%= @common_space.name %>
    </h2>

    <!-- Botón nueva reserva -->
    <div class="d-flex justify-content-center mb-4">
      <%= link_to "Nueva reserva",
          new_common_space_booking_path(@common_space),
          class: "btn btn-primary btn-lg px-4 rounded-3 shadow-sm" %>
    </div>

    <% if @bookings.any? %>
      <ul class="list-group shadow-sm rounded-4 mb-4">
        <% @bookings.each do |booking| %>
          <li class="list-group-item d-flex justify-content-between align-items-center p-3">
            <div>
              <strong class="text-primary"><%= booking.resident.user.name %></strong><br>
              <small class="text-muted">
                <%= l booking.start, format: :long %> → <%= l booking.end, format: :long %>
              </small>
            </div>

            <div class="d-flex gap-2">
              <% if policy(booking).edit? %>
                <%= link_to "Editar", edit_booking_path(booking),
                    class: "btn btn-warning btn-sm rounded-pill shadow-sm" %>
              <% end %>
              <%= link_to "Eliminar",
                  booking_path(booking),
                  data: { turbo_method: :delete, turbo_confirm: "¿Seguro?" },
                  class: "btn btn-danger btn-sm rounded-pill shadow-sm" %>
            </div>
          </li>
        <% end %>
      </ul>
    <% else %>
      <p class="text-muted fst-italic text-center mt-3 mb-4">Aún no hay reservas para este espacio.</p>
    <% end %>

    <!-- Botón cerrar -->
    <div class="d-flex justify-content-center">
      <%= link_to "Cerrar", common_space_path(@common_space),
        class: "btn btn-outline-primary btn-lg px-4 rounded-3 shadow-sm" %>
    </div>
  </div>
<% end %>
