<%= turbo_frame_tag "my_bookings" do %>
  <div class="container mt-4">
    <h2 class="fw-bold">
      Reservas de <%= @common_space.name %>
    </h2>

    <div class="mt-3 mb-4">
      <%= link_to "Nueva reserva",
          new_common_space_booking_path(@common_space),
          class: "btn btn-primary rounded-pill" %>
    </div>

    <% if @bookings.any? %>
      <ul class="list-group">
        <% @bookings.each do |booking| %>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <div>
              <strong><%= booking.resident.user.name %></strong><br>
              <small>
                <%= l booking.start, format: :long %> →
                <%= l booking.end, format: :long %>
              </small>
            </div>

            <div class="d-flex gap-2">
              <% if policy(booking).edit?%>
                <%= link_to "Editar", edit_booking_path(booking),
                    class: "btn btn-warning btn-sm rounded-pill" %>
              <%end%>
              <%= link_to "Eliminar",
                  booking_path(booking),
                  data: { turbo_method: :delete, turbo_confirm: "¿Seguro?" },
                  class: "btn btn-danger btn-sm rounded-pill" %>
            </div>
          </li>
        <% end %>
      </ul>
    <% else %>
      <p class="text-muted mt-3">Aún no hay reservas para este espacio.</p>
    <% end %>

    <%= link_to "Volver al espacio", common_space_path(@common_space), class: "btn btn-secondary mt-3 mb-3" %>
  </div>
<% end %>