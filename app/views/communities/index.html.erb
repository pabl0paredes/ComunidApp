<div class="container py-5">

    <% if @communities.length.positive? %>
    <div class="row g-4">
      <% @communities.each do |community| %>


        <div class="col-md-4">
          <!-- Card de la comunidad (ahora toda apretable) -->
          <div class="card shadow-sm rounded-4 position-relative" style="cursor: pointer;" onclick="window.location='<%= community_path(community) %>';">
            <div class="card-body">
              <!-- Título de la comunidad -->
              <h5 class="card-title text-primary">
                <%= community.name %>
              </h5>

              <!-- Información adicional -->
              <p class="text-muted"><%= community.address %></p>

              <!-- Información de Usuarios y Solicitudes dentro de la card -->
              <div class="mt-3">
                <p><strong>Usuarios:</strong> <%= community.neighbors.where(is_accepted: true).count %> / <%= community.size %></p>
                <p><strong>Solicitudes:</strong> <%= community.pending_requests %></p>
              </div>
            </div>

            <!-- Íconos en las esquinas de la card -->
            <% if community.notifications.positive? || community.neighbors.where(is_accepted: false).count > 0 %>
              <div class="position-absolute top-0 end-0 p-2">
                <!-- Círculo de notificaciones -->
                <% if community.notifications.positive? %>
                  <div class="badge bg-danger text-white position-relative" style="font-size: 1rem; width: 24px; height: 24px; border-radius: 50%; display: flex; justify-content: center; align-items: center;">
                    <%= community.notifications %>
                  </div>
                <% end %>
              </div>


            <% end %>
          </div>
        </div>
      <% end %>
      <!-- Crear nueva comunidad -->
        <div class="text-center mt-4">
          <%= link_to "Crear nueva Comunidad", new_community_path, class: "btn btn-primary btn-lg rounded-3" %>
        </div>
      </div>
    <% else %>
        <!-- Título principal -->
        <div class="text-center mb-4">
          <h1 class="fw-bold text-primary mb-3" style="font-size: 2rem; letter-spacing: -0.5px;">
            No tienes comunidades creadas
          </h1>
        </div>

        <!-- Card de mensaje -->
        <div class="row justify-content-center">
          <div class="col-md-6">
            <div class="card shadow-sm rounded-4 p-4">
              <div class="card-body">
                <!-- Botón para registrarse como vecino -->
                <div class="text-center">
                  <%= link_to "Crear nueva comunidad", new_community_path, class: "btn btn-primary btn-lg w-100" %>
                </div>
              </div>
            </div>
          </div>
        </div>
    <% end %>

</div>
